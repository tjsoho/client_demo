"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./_chunks-cjs/constants.cjs");exports.definePreviewUrl=function(t){const{draftMode:r,previewMode:a,origin:n=(typeof location>"u"?"https://localhost":location.origin)}=t,i=a?.enable||r?.enable;let{preview:o="/"}=t;const s=new URL(o,n),c=i?new URL(i,n):void 0;return async r=>{try{if(r.previewSearchParam){const e=new URL(r.previewSearchParam,s);e.origin===s.origin&&(o=`${e.pathname}${e.search}`)}}catch{}typeof location<"u"&&location.origin===s.origin&&r.studioBasePath&&(o.startsWith(`${r.studioBasePath}/`)||o===r.studioBasePath)&&(o=t.preview||"/");const a=new URL(o,s);if(c){const t=new URL(c),{searchParams:n}=t;return n.set(e.u,r.previewUrlSecret),a.pathname!==t.pathname&&n.set(e.b,`${a.pathname}${a.search}`),t.toString()}return a.toString()}};//# sourceMappingURL=define-preview-url.cjs.map
