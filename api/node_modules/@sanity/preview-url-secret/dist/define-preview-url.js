import{u as e,b as t}from"./_chunks-es/constants.js";function a(a){const{draftMode:n,previewMode:o,origin:r=(typeof location>"u"?"https://localhost":location.origin)}=a,i=o?.enable||n?.enable;let{preview:s="/"}=a;const c=new URL(s,r),h=i?new URL(i,r):void 0;return async n=>{try{if(n.previewSearchParam){const e=new URL(n.previewSearchParam,c);e.origin===c.origin&&(s=`${e.pathname}${e.search}`)}}catch{}typeof location<"u"&&location.origin===c.origin&&n.studioBasePath&&(s.startsWith(`${n.studioBasePath}/`)||s===n.studioBasePath)&&(s=a.preview||"/");const o=new URL(s,c);if(h){const a=new URL(h),{searchParams:r}=a;return r.set(e,n.previewUrlSecret),o.pathname!==a.pathname&&r.set(t,`${o.pathname}${o.search}`),a.toString()}return o.toString()}}export{a as definePreviewUrl};//# sourceMappingURL=define-preview-url.js.map
