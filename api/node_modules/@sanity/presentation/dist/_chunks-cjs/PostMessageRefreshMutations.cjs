"use strict";var e=require("react/jsx-runtime"),t=require("react"),r=require("sanity");function n(e){const{channel:r,draft:n,published:s,livePreviewEnabled:a}=e,[u,o]=t.useState(n),[d,l]=t.useState(s);return t.useEffect((()=>{u?._rev!==n?._rev&&(t.startTransition((()=>o(n))),n&&r?.send("overlays","presentation/refresh",{source:"mutation",livePreviewEnabled:a,document:i(n)})),d?._rev!==s?._rev&&(t.startTransition((()=>l(s))),s&&r?.send("overlays","presentation/refresh",{source:"mutation",livePreviewEnabled:a,document:i(s)}))}),[r,n,a,u?._rev,d?._rev,s]),null}function i(e){const{_id:t,_type:r,_rev:n,slug:i}=e;return{_id:t,_type:r,_rev:n,slug:i}}var s=t.memo((function(i){const{channel:s,type:a,previewKitConnection:u,loadersConnection:o}=i,d=t.useMemo((()=>r.getPublishedId(i.id)),[i.id]),{draft:l,published:c,ready:v}=r.useEditState(d,a,"low"),_="connected"===u||"connected"===o;return v&&l||c?e.jsx(n,{channel:s,draft:l,livePreviewEnabled:_,published:c},d):null}));exports.default=s;//# sourceMappingURL=PostMessageRefreshMutations.cjs.map
