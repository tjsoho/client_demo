import{jsx as e}from"react/jsx-runtime";import{memo as n,useMemo as r,useState as t,useEffect as i,startTransition as o}from"react";import{getPublishedId as l,useEditState as a}from"sanity";function d(e){const{channel:n,draft:r,published:l,livePreviewEnabled:a}=e,[d,c]=t(r),[u,v]=t(l);return i((()=>{d?._rev!==r?._rev&&(o((()=>c(r))),r&&n?.send("overlays","presentation/refresh",{source:"mutation",livePreviewEnabled:a,document:s(r)})),u?._rev!==l?._rev&&(o((()=>v(l))),l&&n?.send("overlays","presentation/refresh",{source:"mutation",livePreviewEnabled:a,document:s(l)}))}),[n,r,a,d?._rev,u?._rev,l]),null}function s(e){const{_id:n,_type:r,_rev:t,slug:i}=e;return{_id:n,_type:r,_rev:t,slug:i}}var c=n((function(n){const{channel:t,type:i,previewKitConnection:o,loadersConnection:s}=n,c=r((()=>l(n.id)),[n.id]),{draft:u,published:v,ready:p}=a(c,i,"low");return p&&u||v?e(d,{channel:t,draft:u,livePreviewEnabled:"connected"===o||"connected"===s,published:v},c):null}));export{c as default};//# sourceMappingURL=PostMessageRefreshMutations.js.map
