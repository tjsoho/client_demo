{"version":3,"file":"BroadcastDisplayedDocument.js","sources":["../../src/loader/BroadcastDisplayedDocument.tsx"],"sourcesContent":["import {memo, useEffect} from 'react'\nimport type {SanityDocument} from 'sanity'\n\nimport {usePresentationParams} from '../usePresentationParams'\nimport {useDisplayedDocumentBroadcaster} from './DisplayedDocumentBroadcaster'\n\n/**\n * Sanity Form input component that reads the current form state and broadcasts it to\n * the live query store\n */\nfunction BroadcastDisplayedDocument(props: {\n  value: Partial<SanityDocument> | null | undefined\n}): JSX.Element | null {\n  const setDisplayedDocument = useDisplayedDocumentBroadcaster()\n  const params = usePresentationParams(false)\n\n  useEffect(() => {\n    const timeout = setTimeout(() => setDisplayedDocument?.(props.value), 10)\n    return () => clearTimeout(timeout)\n  }, [params?.perspective, props.value, setDisplayedDocument])\n\n  return null\n}\n\nexport default memo(BroadcastDisplayedDocument)\n"],"names":["BroadcastDisplayedDocument$1","memo","props","setDisplayedDocument","useDisplayedDocumentBroadcaster","params","usePresentationParams","useEffect","timeout","setTimeout","value","clearTimeout","perspective"],"mappings":"iIAwBA,IAAeA,EAAAC,GAdf,SAAoCC,GAGlC,MAAMC,EAAuBC,IACvBC,EAASC,GAAsB,GAErC,OAAAC,GAAU,KACR,MAAMC,EAAUC,YAAW,IAAMN,IAAuBD,EAAMQ,QAAQ,IAC/D,MAAA,IAAMC,aAAaH,EAAO,GAChC,CAACH,GAAQO,YAAaV,EAAMQ,MAAOP,IAE/B,IACT"}